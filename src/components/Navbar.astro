---
// src/components/Navbar.astro
---
<nav class="bg-white border-b p-4">
    <div class="max-w-7xl mx-auto flex items-center justify-between">
      <a href="/" class="text-xl font-bold">Glint</a>
      <div class="flex items-center space-x-4">
        <a href="/" class="nav-link">Home</a>
        <a href="/shop" class="nav-link">Shop</a>
        <a href="/sell" class="nav-link">Sell with Us</a>
        <a href="/about" class="nav-link">About Us</a>
        <a href="/contact" class="nav-link">Contact</a>
        <a href="/vendor-portal" id="vendorPortalLink" class="nav-link hidden">Vendor Portal</a>
        <a href="/login" id="loginLink" class="nav-link hidden">Login</a>
        <a href="/register" id="registerLink" class="nav-link hidden">Register</a>
        <button id="logoutBtn" class="nav-link hidden">Logout</button>
      </div>
    </div>
  </nav>
  
  <script is:inline type="module">
    // Utility: read cookie value by name
    function getCookie(name) {
      return document.cookie.split('; ').reduce((r, v) => {
        const parts = v.split('=');
        return parts[0] === name ? decodeURIComponent(parts[1]) : r;
      }, '');
    }
  
    const token = getCookie('token');
    const isVendor = Boolean(token);
  
    // Show/hide links based on authentication
    document.getElementById('vendorPortalLink').classList.toggle('hidden', !isVendor);
    document.getElementById('logoutBtn').classList.toggle('hidden', !isVendor);
    document.getElementById('loginLink').classList.toggle('hidden', isVendor);
    document.getElementById('registerLink').classList.toggle('hidden', isVendor);
  
    // Logout handler
    document.getElementById('logoutBtn').addEventListener('click', () => {
      // Clear the cookie
      document.cookie = 'token=; Path=/; Max-Age=0; SameSite=strict';
      window.location.href = '/';
    });
  </script>
  